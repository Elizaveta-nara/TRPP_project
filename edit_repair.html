{% extends 'base.html' %}

{% block content %}
<h1>{% block title %} Редактирование договора {% endblock %}</h1>
<br>
<form method="post" class="px-4">
    <div class="row mb-4">
        <label for="number" class="col-sm-3 col-form-label">Номер договора</label>
        <div class="col-sm-8">
            <input type="text" class="form-control" name="number" value="{{ repair['number'] }}" placeholder="Введите номер договора...">
        </div>
    </div>
    <div class="row mb-3">
        <label for="date" class="col-sm-3 col-form-label">Дата</label>
        <div class="col-sm-8">
            <input type="date" class="form-control" name="date" value="{{ repair['date'] }}" placeholder="Введите дату договора...">
        </div>
    </div>
    <div class="row mb-3">
        <label for="repair_type" class="col-sm-3 col-form-label">Вид работ</label>
        <div class="col-sm-8">
            <input type="text" class="form-control" name="repair_type" value="{{ repair['repair_type'] }}" placeholder="Введите вид работ...">
        </div>
    </div>
    <div class="row mb-3">
        <label for="start_price" class="col-sm-3 col-form-label">Начальная стоимость</label>
        <div class="col-sm-8">
            <input type="number" class="form-control" name="start_price" value="{{ repair['start_price'] }}" placeholder="Введите начальную стоимость...">
        </div>
    </div>
    <div class="row mb-3">
        <label for="discount" class="col-sm-3 col-form-label">Скидка</label>
        <div class="col-sm-8">
            <input type="number" class="form-control" name="discount" value="{{ repair['discount'] }}" placeholder="Введите скидку...">
        </div>
    </div>
    <div class="row mb-3">
        <label for="client_id" class="col-sm-3 col-form-label">Клиент</label>
        <div class="col-sm-8">
            <select class="form-control" name="client_id" required>
                <option value="">Выберите клиента</option>
                {% for client in clients %}
                <option value="{{ client['id_client'] }}" {% if client['id_client'] == repair['client_id'] %}selected{% endif %}>
                    {{ client['name'] }}
                </option>
                {% endfor %}
            </select>
        </div>
    </div>
    <div class="row mb-3">
        <label for="car_id" class="col-sm-3 col-form-label">Автомобиль</label>
        <div class="col-sm-8">
            <select class="form-control" name="car_id" required>
                <option value="">Выберите автомобиль</option>
                {% for car in cars %}
                <option value="{{ car['id_car'] }}" {% if car['id_car'] == repair['car_id'] %}selected{% endif %}>
                    {{ car['car_brand'] }} {{ car['car_model'] }} ({{ car['license_plate'] }})
                </option>
                {% endfor %}
            </select>
        </div>
    </div>
    <div class="row mb-3">
        <label for="employee_id" class="col-sm-3 col-form-label">Сотрудник</label>
        <div class="col-sm-8">
            <select class="form-control" name="employee_id" required>
                <option value="">Выберите сотрудника</option>
                {% for employee in employees %}
                <option value="{{ employee['id'] }}" {% if employee['id'] == repair['employee_id'] %}selected{% endif %}>
                    {{ employee['name'] }}
                </option>
                {% endfor %}
            </select>
        </div>
    </div>
    <button type="submit" class="btn btn-primary"><i class="bi-save"></i> Сохранить изменения</button>
    <a href="{{ url_for('repairs') }}" class="btn btn-secondary"><i class="bi-arrow-left"></i> Вернуться к списку</a>
</form>
{% endblock %}